{"remainingRequest":"D:\\大学生活\\大三\\全栈ai\\项目\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\大学生活\\大三\\全栈ai\\项目\\-Time-Traveler-Auction\\src\\pages\\profile\\profile.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\大学生活\\大三\\全栈ai\\项目\\-Time-Traveler-Auction\\src\\pages\\profile\\profile.vue","mtime":1762087622752},{"path":"D:\\大学生活\\大三\\全栈ai\\项目\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1762215254891},{"path":"D:\\大学生活\\大三\\全栈ai\\项目\\node_modules\\babel-loader\\lib\\index.js","mtime":1762215256120},{"path":"D:\\大学生活\\大三\\全栈ai\\项目\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1762215254891},{"path":"D:\\大学生活\\大三\\全栈ai\\项目\\node_modules\\vue-loader\\lib\\index.js","mtime":1762215256637}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgYXV0aFNlcnZpY2UgZnJvbSAnLi4vLi4vc2VydmljZXMvYXV0aC1zZXJ2aWNlJw0KaW1wb3J0IHsgZ2V0U3VwYWJhc2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9zdXBhYmFzZS1jbGllbnQnDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ1Byb2ZpbGVQYWdlJywNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgdXNlcjogbnVsbCwNCiAgICAgIHVzZXJQcm9maWxlOiB7DQogICAgICAgIHVzZXJuYW1lOiAnJywNCiAgICAgICAgYXZhdGFyOiAnJw0KICAgICAgfSwNCiAgICAgIGdhbWVTdGF0czogew0KICAgICAgICB0b3RhbEdhbWVzOiAwLA0KICAgICAgICB3aW5zOiAwLA0KICAgICAgICB0b3RhbEFydGlmYWN0czogMCwNCiAgICAgICAgdG90YWxFbmVyZ3k6IDANCiAgICAgIH0sDQogICAgICBpc0VkaXRpbmc6IGZhbHNlLA0KICAgICAgaXNVcGxvYWRpbmc6IGZhbHNlLA0KICAgICAgb3JpZ2luYWxQcm9maWxlOiB7fSwNCiAgICAgIGVycm9yTWVzc2FnZTogJycsDQogICAgICBzdWNjZXNzTWVzc2FnZTogJycNCiAgICB9DQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgZGVmYXVsdEF2YXRhcigpIHsNCiAgICAgIGlmICghdGhpcy51c2VyKSByZXR1cm4gJycNCiAgICAgIGNvbnN0IGNvZGUgPSAodGhpcy51c2VyLmlkIHx8ICdVJykuc2xpY2UoMCwgMikudG9VcHBlckNhc2UoKQ0KICAgICAgY29uc3QgYmcgPSAnMzM0MTU1Jw0KICAgICAgY29uc3QgZmcgPSAnZTJlOGYwJw0KICAgICAgY29uc3Qgc3ZnID0gZW5jb2RlVVJJQ29tcG9uZW50KGA8c3ZnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zycgd2lkdGg9JzEyMCcgaGVpZ2h0PScxMjAnPjxyZWN0IHdpZHRoPScxMDAlJyBoZWlnaHQ9JzEwMCUnIGZpbGw9JyMke2JnfScvPjx0ZXh0IHg9JzUwJScgeT0nNTUlJyBkb21pbmFudC1iYXNlbGluZT0nbWlkZGxlJyB0ZXh0LWFuY2hvcj0nbWlkZGxlJyBmb250LXNpemU9JzQ4JyBmaWxsPScjJHtmZ30nIGZvbnQtZmFtaWx5PSdBcmlhbCwgc2Fucy1zZXJpZic+JHtjb2RlfTwvdGV4dD48L3N2Zz5gKQ0KICAgICAgcmV0dXJuIGBkYXRhOmltYWdlL3N2Zyt4bWw7Y2hhcnNldD11dGYtOCwke3N2Z31gDQogICAgfQ0KICB9LA0KICBhc3luYyBtb3VudGVkKCkgew0KICAgIGF3YWl0IHRoaXMubG9hZFVzZXJEYXRhKCkNCiAgICBhd2FpdCB0aGlzLmxvYWRVc2VyUHJvZmlsZSgpDQogICAgYXdhaXQgdGhpcy5sb2FkR2FtZVN0YXRzKCkNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGFzeW5jIGxvYWRVc2VyRGF0YSgpIHsNCiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBhdXRoU2VydmljZS5nZXRVc2VyKCkNCiAgICAgIGlmICh1c2VyKSB7DQogICAgICAgIHRoaXMudXNlciA9IHVzZXINCiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdTRVRfVVNFUicsIHVzZXIpDQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2xvZ2luJykNCiAgICAgIH0NCiAgICB9LA0KICAgIA0KICAgIGFzeW5jIGxvYWRVc2VyUHJvZmlsZSgpIHsNCiAgICAgIGlmICghdGhpcy51c2VyKSByZXR1cm4NCiAgICAgIA0KICAgICAgdHJ5IHsNCiAgICAgICAgY29uc3Qgc3VwYWJhc2UgPSBnZXRTdXBhYmFzZSgpDQogICAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlDQogICAgICAgICAgLmZyb20oJ3Byb2ZpbGVzJykNCiAgICAgICAgICAuc2VsZWN0KCcqJykNCiAgICAgICAgICAuZXEoJ2lkJywgdGhpcy51c2VyLmlkKQ0KICAgICAgICAgIC5zaW5nbGUoKQ0KICAgICAgICANCiAgICAgICAgaWYgKGVycm9yICYmIGVycm9yLmNvZGUgIT09ICdQR1JTVDExNicpIHsNCiAgICAgICAgICB0aHJvdyBlcnJvcg0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICBpZiAoZGF0YSkgew0KICAgICAgICAgIHRoaXMudXNlclByb2ZpbGUgPSB7DQogICAgICAgICAgICB1c2VybmFtZTogZGF0YS51c2VybmFtZSB8fCAnJywNCiAgICAgICAgICAgIGF2YXRhcjogZGF0YS5hdmF0YXIgfHwgJycNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+WKoOi9veeUqOaIt+i1hOaWmeWksei0pTonLCBlcnJvcikNCiAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2UgPSAn5Yqg6L2955So5oi36LWE5paZ5aSx6LSlJw0KICAgICAgfQ0KICAgIH0sDQogICAgDQogICAgYXN5bmMgbG9hZEdhbWVTdGF0cygpIHsNCiAgICAgIGlmICghdGhpcy51c2VyKSByZXR1cm4NCiAgICAgIA0KICAgICAgdHJ5IHsNCiAgICAgICAgY29uc3Qgc3VwYWJhc2UgPSBnZXRTdXBhYmFzZSgpDQogICAgICAgIA0KICAgICAgICAvLyDojrflj5bmuLjmiI/nu5/orqHvvIjov5nph4zpnIDopoHmoLnmja7lrp7pmYXnmoTmuLjmiI/mlbDmja7ooajnu5PmnoTmnaXmn6Xor6LvvIkNCiAgICAgICAgLy8g5pqC5pe25L2/55So5qih5ouf5pWw5o2uDQogICAgICAgIHRoaXMuZ2FtZVN0YXRzID0gew0KICAgICAgICAgIHRvdGFsR2FtZXM6IDAsDQogICAgICAgICAgd2luczogMCwNCiAgICAgICAgICB0b3RhbEFydGlmYWN0czogMCwNCiAgICAgICAgICB0b3RhbEVuZXJneTogMA0KICAgICAgICB9DQogICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICBjb25zb2xlLmVycm9yKCfliqDovb3muLjmiI/nu5/orqHlpLHotKU6JywgZXJyb3IpDQogICAgICB9DQogICAgfSwNCiAgICANCiAgICB0b2dnbGVFZGl0KCkgew0KICAgICAgdGhpcy5pc0VkaXRpbmcgPSB0cnVlDQogICAgICB0aGlzLm9yaWdpbmFsUHJvZmlsZSA9IHsgLi4udGhpcy51c2VyUHJvZmlsZSB9DQogICAgfSwNCiAgICANCiAgICBjYW5jZWxFZGl0KCkgew0KICAgICAgdGhpcy5pc0VkaXRpbmcgPSBmYWxzZQ0KICAgICAgdGhpcy51c2VyUHJvZmlsZSA9IHsgLi4udGhpcy5vcmlnaW5hbFByb2ZpbGUgfQ0KICAgICAgdGhpcy5lcnJvck1lc3NhZ2UgPSAnJw0KICAgICAgdGhpcy5zdWNjZXNzTWVzc2FnZSA9ICcnDQogICAgfSwNCiAgICANCiAgICBhc3luYyBzYXZlUHJvZmlsZSgpIHsNCiAgICAgIGlmICghdGhpcy51c2VyKSByZXR1cm4NCiAgICAgIA0KICAgICAgdHJ5IHsNCiAgICAgICAgY29uc3Qgc3VwYWJhc2UgPSBnZXRTdXBhYmFzZSgpDQogICAgICAgIA0KICAgICAgICAvLyDmnoTlu7rmm7TmlrDmlbDmja7vvIzlj6rljIXlkKvmnInlgLznmoTlrZfmrrUNCiAgICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IHsNCiAgICAgICAgICBpZDogdGhpcy51c2VyLmlkLA0KICAgICAgICAgIHVzZXJuYW1lOiB0aGlzLnVzZXJQcm9maWxlLnVzZXJuYW1lIHx8IG51bGwNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8g5Y+q5pyJ5b2TYXZhdGFy5LiN5Li656m65pe25omN5YyF5ZCrYXZhdGFy5a2X5q61DQogICAgICAgIGlmICh0aGlzLnVzZXJQcm9maWxlLmF2YXRhcikgew0KICAgICAgICAgIHVwZGF0ZURhdGEuYXZhdGFyID0gdGhpcy51c2VyUHJvZmlsZS5hdmF0YXINCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8g5pu05paw5oiW5o+S5YWl55So5oi36LWE5paZDQogICAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlDQogICAgICAgICAgLmZyb20oJ3Byb2ZpbGVzJykNCiAgICAgICAgICAudXBzZXJ0KHVwZGF0ZURhdGEpDQogICAgICAgIA0KICAgICAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yDQogICAgICAgIA0KICAgICAgICAvLyDlkIzmraXmm7TmlrDliLDlhajlsYBzdG9yZe+8jOehruS/neiPnOWNlS/miL/pl7TnlYzpnaLnq4vljbPmmL7npLrmnIDmlrDnlKjmiLflkI3kuI7lpLTlg48NCiAgICAgICAgY29uc3QgbmV3VXNlciA9IHsNCiAgICAgICAgICAuLi50aGlzLiRzdG9yZS5zdGF0ZS51c2VyLA0KICAgICAgICAgIHVzZXJuYW1lOiB0aGlzLnVzZXJQcm9maWxlLnVzZXJuYW1lIHx8ICh0aGlzLiRzdG9yZS5zdGF0ZS51c2VyICYmIHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIudXNlcm5hbWUpLA0KICAgICAgICAgIGF2YXRhcjogdGhpcy51c2VyUHJvZmlsZS5hdmF0YXIgfHwgKHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIgJiYgdGhpcy4kc3RvcmUuc3RhdGUudXNlci5hdmF0YXIpDQogICAgICAgIH0NCiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdTRVRfVVNFUicsIG5ld1VzZXIpDQogICAgICAgIA0KICAgICAgICB0aGlzLmlzRWRpdGluZyA9IGZhbHNlDQogICAgICAgIHRoaXMuc3VjY2Vzc01lc3NhZ2UgPSAn6LWE5paZ5L+d5a2Y5oiQ5YqfJw0KICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICB0aGlzLnN1Y2Nlc3NNZXNzYWdlID0gJycNCiAgICAgICAgfSwgMzAwMCkNCiAgICAgICAgDQogICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICBjb25zb2xlLmVycm9yKCfkv53lrZjnlKjmiLfotYTmlpnlpLHotKU6JywgZXJyb3IpDQogICAgICAgIHRoaXMuZXJyb3JNZXNzYWdlID0gJ+S/neWtmOeUqOaIt+i1hOaWmeWksei0pTogJyArIChlcnJvci5tZXNzYWdlIHx8ICfmnKrnn6XplJnor68nKQ0KICAgICAgfQ0KICAgIH0sDQogICAgDQogICAgY2hhbmdlQXZhdGFyKCkgew0KICAgICAgLy8g5Yib5bu65paH5Lu26L6T5YWl5YWD57SgDQogICAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0JykNCiAgICAgIGlucHV0LnR5cGUgPSAnZmlsZScNCiAgICAgIGlucHV0LmFjY2VwdCA9ICdpbWFnZS8qJw0KICAgICAgaW5wdXQuc3R5bGUuZGlzcGxheSA9ICdub25lJw0KICAgICAgDQogICAgICBpbnB1dC5vbmNoYW5nZSA9IGFzeW5jIChldmVudCkgPT4gew0KICAgICAgICBjb25zdCBmaWxlID0gZXZlbnQudGFyZ2V0LmZpbGVzWzBdDQogICAgICAgIGlmICghZmlsZSkgcmV0dXJuDQogICAgICAgIA0KICAgICAgICAvLyDmo4Dmn6Xmlofku7blpKflsI/vvIjpmZDliLbkuLoyTULvvIkNCiAgICAgICAgaWYgKGZpbGUuc2l6ZSA+IDIgKiAxMDI0ICogMTAyNCkgew0KICAgICAgICAgIHRoaXMuZXJyb3JNZXNzYWdlID0gJ+WbvueJh+Wkp+Wwj+S4jeiDvei2hei/hzJNQicNCiAgICAgICAgICByZXR1cm4NCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8g5qOA5p+l5paH5Lu257G75Z6LDQogICAgICAgIGlmICghZmlsZS50eXBlLnN0YXJ0c1dpdGgoJ2ltYWdlLycpKSB7DQogICAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2UgPSAn6K+36YCJ5oup5Zu+54mH5paH5Lu2Jw0KICAgICAgICAgIHJldHVybg0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICB0cnkgew0KICAgICAgICAgIGF3YWl0IHRoaXMudXBsb2FkQXZhdGFyKGZpbGUpDQogICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgICAgY29uc29sZS5lcnJvcign5aS05YOP5LiK5Lyg5aSx6LSlOicsIGVycm9yKQ0KICAgICAgICAgIHRoaXMuZXJyb3JNZXNzYWdlID0gJ+WktOWDj+S4iuS8oOWksei0pScNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgDQogICAgICAvLyDop6blj5Hmlofku7bpgInmi6kNCiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaW5wdXQpDQogICAgICBpbnB1dC5jbGljaygpDQogICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGlucHV0KQ0KICAgIH0sDQogICAgDQogICAgYXN5bmMgdXBsb2FkQXZhdGFyKGZpbGUpIHsNCiAgICAgIHRoaXMuaXNVcGxvYWRpbmcgPSB0cnVlDQogICAgICB0aGlzLmVycm9yTWVzc2FnZSA9ICcnDQogICAgICANCiAgICAgIHRyeSB7DQogICAgICAgIGNvbnN0IHN1cGFiYXNlID0gZ2V0U3VwYWJhc2UoKQ0KICAgICAgICANCiAgICAgICAgLy8g55Sf5oiQ5ZSv5LiA55qE5paH5Lu25ZCNDQogICAgICAgIGNvbnN0IGZpbGVFeHQgPSBmaWxlLm5hbWUuc3BsaXQoJy4nKS5wb3AoKQ0KICAgICAgICBjb25zdCBmaWxlTmFtZSA9IGAke3RoaXMudXNlci5pZH1fJHtEYXRlLm5vdygpfS4ke2ZpbGVFeHR9YA0KICAgICAgICBjb25zdCBmaWxlUGF0aCA9IGAke3RoaXMudXNlci5pZH0vJHtmaWxlTmFtZX1gDQogICAgICAgIA0KICAgICAgICAvLyDkuIrkvKDmlofku7bliLBTdXBhYmFzZSBTdG9yYWdlDQogICAgICAgIGNvbnN0IHsgZXJyb3I6IHVwbG9hZEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5zdG9yYWdlDQogICAgICAgICAgLmZyb20oJ2F2YXRhcnMnKQ0KICAgICAgICAgIC51cGxvYWQoZmlsZVBhdGgsIGZpbGUsIHsNCiAgICAgICAgICAgIGNhY2hlQ29udHJvbDogJzM2MDAnLA0KICAgICAgICAgICAgdXBzZXJ0OiBmYWxzZQ0KICAgICAgICAgIH0pDQogICAgICAgIA0KICAgICAgICBpZiAodXBsb2FkRXJyb3IpIHRocm93IHVwbG9hZEVycm9yDQogICAgICAgIA0KICAgICAgICAvLyDojrflj5blhazlvIBVUkwNCiAgICAgICAgY29uc3QgeyBkYXRhIH0gPSBzdXBhYmFzZS5zdG9yYWdlDQogICAgICAgICAgLmZyb20oJ2F2YXRhcnMnKQ0KICAgICAgICAgIC5nZXRQdWJsaWNVcmwoZmlsZVBhdGgpDQogICAgICAgIA0KICAgICAgICAvLyDmm7TmlrDnlKjmiLfotYTmlpnkuK3nmoTlpLTlg49VUkwNCiAgICAgICAgdGhpcy51c2VyUHJvZmlsZS5hdmF0YXIgPSBkYXRhLnB1YmxpY1VybA0KICAgICAgICANCiAgICAgICAgLy8g6Ieq5Yqo5L+d5a2YDQogICAgICAgIGF3YWl0IHRoaXMuc2F2ZVByb2ZpbGUoKQ0KICAgICAgICANCiAgICAgICAgdGhpcy5zdWNjZXNzTWVzc2FnZSA9ICflpLTlg4/kuIrkvKDmiJDlip8nDQogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAgIHRoaXMuc3VjY2Vzc01lc3NhZ2UgPSAnJw0KICAgICAgICB9LCAzMDAwKQ0KICAgICAgICANCiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+WktOWDj+S4iuS8oOWksei0pTonLCBlcnJvcikNCiAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2UgPSAn5aS05YOP5LiK5Lyg5aSx6LSlOiAnICsgKGVycm9yLm1lc3NhZ2UgfHwgJ+acquefpemUmeivrycpDQogICAgICB9IGZpbmFsbHkgew0KICAgICAgICB0aGlzLmlzVXBsb2FkaW5nID0gZmFsc2UNCiAgICAgIH0NCiAgICB9LA0KICAgIA0KICAgIGhhbmRsZUF2YXRhckVycm9yKGV2ZW50KSB7DQogICAgICAvLyDlpLTlg4/liqDovb3lpLHotKXml7bkvb/nlKjpu5jorqTlpLTlg48NCiAgICAgIGV2ZW50LnRhcmdldC5zcmMgPSB0aGlzLmRlZmF1bHRBdmF0YXINCiAgICB9LA0KICAgIA0KICAgIGZvcm1hdERhdGUoZGF0ZVN0cmluZykgew0KICAgICAgaWYgKCFkYXRlU3RyaW5nKSByZXR1cm4gJy0nDQogICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoZGF0ZVN0cmluZykNCiAgICAgIHJldHVybiBkYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygnemgtQ04nLCB7DQogICAgICAgIHllYXI6ICdudW1lcmljJywNCiAgICAgICAgbW9udGg6ICdsb25nJywNCiAgICAgICAgZGF5OiAnbnVtZXJpYycsDQogICAgICAgIGhvdXI6ICcyLWRpZ2l0JywNCiAgICAgICAgbWludXRlOiAnMi1kaWdpdCcNCiAgICAgIH0pDQogICAgfSwNCiAgICANCiAgICBhc3luYyBsb2dvdXQoKSB7DQogICAgICB0cnkgew0KICAgICAgICBhd2FpdCBhdXRoU2VydmljZS5zaWduT3V0KCkNCiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdTRVRfVVNFUicsIG51bGwpDQogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnU0VUX1JPT01fSUQnLCBudWxsKQ0KICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2xvZ2luJykNCiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+mAgOWHuueZu+W9leWksei0pTonLCBlcnJvcikNCiAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2UgPSAn6YCA5Ye655m75b2V5aSx6LSlJw0KICAgICAgfQ0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["profile.vue"],"names":[],"mappings":";AAiHA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"profile.vue","sourceRoot":"src/pages/profile","sourcesContent":["<template>\r\n  <div class=\"profile-container\">\r\n    <div class=\"profile-card\">\r\n      <h2 class=\"title\">个人中心</h2>\r\n      \r\n      <div class=\"user-info\" v-if=\"user\">\r\n        <div class=\"avatar-section\">\r\n          <div class=\"avatar-container\">\r\n            <div class=\"avatar-wrapper\" @click=\"changeAvatar\">\r\n              <img \r\n                class=\"avatar\" \r\n                :src=\"userProfile.avatar || defaultAvatar\" \r\n                alt=\"用户头像\"\r\n                @error=\"handleAvatarError\"\r\n              />\r\n              <div v-if=\"isUploading\" class=\"upload-overlay\">\r\n                <div class=\"upload-spinner\"></div>\r\n                <span>上传中...</span>\r\n              </div>\r\n            </div>\r\n            <button class=\"avatar-edit-btn\" @click=\"changeAvatar\" :disabled=\"isUploading\">\r\n              {{ isUploading ? '上传中...' : '更换头像' }}\r\n            </button>\r\n          </div>\r\n        </div>\r\n        \r\n        <div class=\"info-section\">\r\n          <div class=\"form-field\">\r\n            <label>用户名</label>\r\n            <input \r\n              v-model=\"userProfile.username\" \r\n              type=\"text\" \r\n              placeholder=\"请输入用户名\"\r\n              :disabled=\"!isEditing\"\r\n            />\r\n          </div>\r\n          \r\n          <div class=\"form-field\">\r\n            <label>邮箱</label>\r\n            <input \r\n              v-model=\"user.email\" \r\n              type=\"email\" \r\n              disabled\r\n              class=\"disabled-input\"\r\n            />\r\n          </div>\r\n          \r\n          <div class=\"form-field\">\r\n            <label>注册时间</label>\r\n            <input \r\n              :value=\"formatDate(user.created_at)\" \r\n              type=\"text\" \r\n              disabled\r\n              class=\"disabled-input\"\r\n            />\r\n          </div>\r\n        </div>\r\n        \r\n        <div class=\"actions\">\r\n          <button \r\n            class=\"btn\" \r\n            @click=\"toggleEdit\"\r\n            v-if=\"!isEditing\"\r\n          >\r\n            编辑资料\r\n          </button>\r\n          <template v-else>\r\n            <button class=\"btn primary\" @click=\"saveProfile\">保存</button>\r\n            <button class=\"btn\" @click=\"cancelEdit\">取消</button>\r\n          </template>\r\n        </div>\r\n      </div>\r\n      \r\n      <div class=\"divider\"></div>\r\n      \r\n      <!-- 游戏统计 -->\r\n      <div class=\"stats-section\">\r\n        <h3>游戏统计</h3>\r\n        <div class=\"stats-grid\">\r\n          <div class=\"stat-item\">\r\n            <div class=\"stat-value\">{{ gameStats.totalGames || 0 }}</div>\r\n            <div class=\"stat-label\">总游戏数</div>\r\n          </div>\r\n          <div class=\"stat-item\">\r\n            <div class=\"stat-value\">{{ gameStats.wins || 0 }}</div>\r\n            <div class=\"stat-label\">胜利次数</div>\r\n          </div>\r\n          <div class=\"stat-item\">\r\n            <div class=\"stat-value\">{{ gameStats.totalArtifacts || 0 }}</div>\r\n            <div class=\"stat-label\">获得奇物</div>\r\n          </div>\r\n          <div class=\"stat-item\">\r\n            <div class=\"stat-value\">{{ gameStats.totalEnergy || 0 }}</div>\r\n            <div class=\"stat-label\">总能量</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <div class=\"divider\"></div>\r\n      \r\n      <!-- 操作按钮 -->\r\n      <div class=\"profile-actions\">\r\n        <button class=\"btn\" @click=\"$router.push('/menu')\">返回菜单</button>\r\n        <button class=\"btn danger\" @click=\"logout\">退出登录</button>\r\n      </div>\r\n      \r\n      <p v-if=\"errorMessage\" class=\"error\">{{ errorMessage }}</p>\r\n      <p v-if=\"successMessage\" class=\"success\">{{ successMessage }}</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport authService from '../../services/auth-service'\r\nimport { getSupabase } from '../../services/supabase-client'\r\n\r\nexport default {\r\n  name: 'ProfilePage',\r\n  data() {\r\n    return {\r\n      user: null,\r\n      userProfile: {\r\n        username: '',\r\n        avatar: ''\r\n      },\r\n      gameStats: {\r\n        totalGames: 0,\r\n        wins: 0,\r\n        totalArtifacts: 0,\r\n        totalEnergy: 0\r\n      },\r\n      isEditing: false,\r\n      isUploading: false,\r\n      originalProfile: {},\r\n      errorMessage: '',\r\n      successMessage: ''\r\n    }\r\n  },\r\n  computed: {\r\n    defaultAvatar() {\r\n      if (!this.user) return ''\r\n      const code = (this.user.id || 'U').slice(0, 2).toUpperCase()\r\n      const bg = '334155'\r\n      const fg = 'e2e8f0'\r\n      const svg = encodeURIComponent(`<svg xmlns='http://www.w3.org/2000/svg' width='120' height='120'><rect width='100%' height='100%' fill='#${bg}'/><text x='50%' y='55%' dominant-baseline='middle' text-anchor='middle' font-size='48' fill='#${fg}' font-family='Arial, sans-serif'>${code}</text></svg>`)\r\n      return `data:image/svg+xml;charset=utf-8,${svg}`\r\n    }\r\n  },\r\n  async mounted() {\r\n    await this.loadUserData()\r\n    await this.loadUserProfile()\r\n    await this.loadGameStats()\r\n  },\r\n  methods: {\r\n    async loadUserData() {\r\n      const user = await authService.getUser()\r\n      if (user) {\r\n        this.user = user\r\n        this.$store.commit('SET_USER', user)\r\n      } else {\r\n        this.$router.push('/login')\r\n      }\r\n    },\r\n    \r\n    async loadUserProfile() {\r\n      if (!this.user) return\r\n      \r\n      try {\r\n        const supabase = getSupabase()\r\n        const { data, error } = await supabase\r\n          .from('profiles')\r\n          .select('*')\r\n          .eq('id', this.user.id)\r\n          .single()\r\n        \r\n        if (error && error.code !== 'PGRST116') {\r\n          throw error\r\n        }\r\n        \r\n        if (data) {\r\n          this.userProfile = {\r\n            username: data.username || '',\r\n            avatar: data.avatar || ''\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('加载用户资料失败:', error)\r\n        this.errorMessage = '加载用户资料失败'\r\n      }\r\n    },\r\n    \r\n    async loadGameStats() {\r\n      if (!this.user) return\r\n      \r\n      try {\r\n        const supabase = getSupabase()\r\n        \r\n        // 获取游戏统计（这里需要根据实际的游戏数据表结构来查询）\r\n        // 暂时使用模拟数据\r\n        this.gameStats = {\r\n          totalGames: 0,\r\n          wins: 0,\r\n          totalArtifacts: 0,\r\n          totalEnergy: 0\r\n        }\r\n      } catch (error) {\r\n        console.error('加载游戏统计失败:', error)\r\n      }\r\n    },\r\n    \r\n    toggleEdit() {\r\n      this.isEditing = true\r\n      this.originalProfile = { ...this.userProfile }\r\n    },\r\n    \r\n    cancelEdit() {\r\n      this.isEditing = false\r\n      this.userProfile = { ...this.originalProfile }\r\n      this.errorMessage = ''\r\n      this.successMessage = ''\r\n    },\r\n    \r\n    async saveProfile() {\r\n      if (!this.user) return\r\n      \r\n      try {\r\n        const supabase = getSupabase()\r\n        \r\n        // 构建更新数据，只包含有值的字段\r\n        const updateData = {\r\n          id: this.user.id,\r\n          username: this.userProfile.username || null\r\n        }\r\n        \r\n        // 只有当avatar不为空时才包含avatar字段\r\n        if (this.userProfile.avatar) {\r\n          updateData.avatar = this.userProfile.avatar\r\n        }\r\n        \r\n        // 更新或插入用户资料\r\n        const { error } = await supabase\r\n          .from('profiles')\r\n          .upsert(updateData)\r\n        \r\n        if (error) throw error\r\n        \r\n        // 同步更新到全局store，确保菜单/房间界面立即显示最新用户名与头像\r\n        const newUser = {\r\n          ...this.$store.state.user,\r\n          username: this.userProfile.username || (this.$store.state.user && this.$store.state.user.username),\r\n          avatar: this.userProfile.avatar || (this.$store.state.user && this.$store.state.user.avatar)\r\n        }\r\n        this.$store.commit('SET_USER', newUser)\r\n        \r\n        this.isEditing = false\r\n        this.successMessage = '资料保存成功'\r\n        setTimeout(() => {\r\n          this.successMessage = ''\r\n        }, 3000)\r\n        \r\n      } catch (error) {\r\n        console.error('保存用户资料失败:', error)\r\n        this.errorMessage = '保存用户资料失败: ' + (error.message || '未知错误')\r\n      }\r\n    },\r\n    \r\n    changeAvatar() {\r\n      // 创建文件输入元素\r\n      const input = document.createElement('input')\r\n      input.type = 'file'\r\n      input.accept = 'image/*'\r\n      input.style.display = 'none'\r\n      \r\n      input.onchange = async (event) => {\r\n        const file = event.target.files[0]\r\n        if (!file) return\r\n        \r\n        // 检查文件大小（限制为2MB）\r\n        if (file.size > 2 * 1024 * 1024) {\r\n          this.errorMessage = '图片大小不能超过2MB'\r\n          return\r\n        }\r\n        \r\n        // 检查文件类型\r\n        if (!file.type.startsWith('image/')) {\r\n          this.errorMessage = '请选择图片文件'\r\n          return\r\n        }\r\n        \r\n        try {\r\n          await this.uploadAvatar(file)\r\n        } catch (error) {\r\n          console.error('头像上传失败:', error)\r\n          this.errorMessage = '头像上传失败'\r\n        }\r\n      }\r\n      \r\n      // 触发文件选择\r\n      document.body.appendChild(input)\r\n      input.click()\r\n      document.body.removeChild(input)\r\n    },\r\n    \r\n    async uploadAvatar(file) {\r\n      this.isUploading = true\r\n      this.errorMessage = ''\r\n      \r\n      try {\r\n        const supabase = getSupabase()\r\n        \r\n        // 生成唯一的文件名\r\n        const fileExt = file.name.split('.').pop()\r\n        const fileName = `${this.user.id}_${Date.now()}.${fileExt}`\r\n        const filePath = `${this.user.id}/${fileName}`\r\n        \r\n        // 上传文件到Supabase Storage\r\n        const { error: uploadError } = await supabase.storage\r\n          .from('avatars')\r\n          .upload(filePath, file, {\r\n            cacheControl: '3600',\r\n            upsert: false\r\n          })\r\n        \r\n        if (uploadError) throw uploadError\r\n        \r\n        // 获取公开URL\r\n        const { data } = supabase.storage\r\n          .from('avatars')\r\n          .getPublicUrl(filePath)\r\n        \r\n        // 更新用户资料中的头像URL\r\n        this.userProfile.avatar = data.publicUrl\r\n        \r\n        // 自动保存\r\n        await this.saveProfile()\r\n        \r\n        this.successMessage = '头像上传成功'\r\n        setTimeout(() => {\r\n          this.successMessage = ''\r\n        }, 3000)\r\n        \r\n      } catch (error) {\r\n        console.error('头像上传失败:', error)\r\n        this.errorMessage = '头像上传失败: ' + (error.message || '未知错误')\r\n      } finally {\r\n        this.isUploading = false\r\n      }\r\n    },\r\n    \r\n    handleAvatarError(event) {\r\n      // 头像加载失败时使用默认头像\r\n      event.target.src = this.defaultAvatar\r\n    },\r\n    \r\n    formatDate(dateString) {\r\n      if (!dateString) return '-'\r\n      const date = new Date(dateString)\r\n      return date.toLocaleDateString('zh-CN', {\r\n        year: 'numeric',\r\n        month: 'long',\r\n        day: 'numeric',\r\n        hour: '2-digit',\r\n        minute: '2-digit'\r\n      })\r\n    },\r\n    \r\n    async logout() {\r\n      try {\r\n        await authService.signOut()\r\n        this.$store.commit('SET_USER', null)\r\n        this.$store.commit('SET_ROOM_ID', null)\r\n        this.$router.push('/login')\r\n      } catch (error) {\r\n        console.error('退出登录失败:', error)\r\n        this.errorMessage = '退出登录失败'\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.profile-container {\r\n  min-height: 100vh;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 24px;\r\n  background:\r\n    radial-gradient(1400px circle at 15% 0%, #0b1220, #0f172a),\r\n    radial-gradient(900px circle at 85% 25%, rgba(99,102,241,0.12), rgba(99,102,241,0));\r\n}\r\n\r\n.profile-card {\r\n  width: 720px;\r\n  background: #0f172a;\r\n  border: 1px solid #1f2937;\r\n  border-radius: 16px;\r\n  box-shadow: 0 20px 40px rgba(2,6,23,0.5);\r\n  padding: 24px;\r\n  color: #e2e8f0;\r\n}\r\n\r\n.title {\r\n  margin: 0 0 20px;\r\n  font-size: 24px;\r\n  font-weight: 600;\r\n}\r\n\r\n.avatar-section {\r\n  display: flex;\r\n  justify-content: center;\r\n  margin-bottom: 24px;\r\n}\r\n\r\n.avatar-container {\r\n  text-align: center;\r\n}\r\n\r\n.avatar-wrapper {\r\n  position: relative;\r\n  display: inline-block;\r\n  cursor: pointer;\r\n}\r\n\r\n.avatar {\r\n  width: 120px;\r\n  height: 120px;\r\n  border-radius: 50%;\r\n  border: 3px solid #1f2937;\r\n  transition: border-color 0.3s ease;\r\n  object-fit: cover;\r\n}\r\n\r\n.avatar:hover {\r\n  border-color: #3b82f6;\r\n}\r\n\r\n.upload-overlay {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(0, 0, 0, 0.7);\r\n  border-radius: 50%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  color: white;\r\n  font-size: 12px;\r\n}\r\n\r\n.upload-spinner {\r\n  width: 20px;\r\n  height: 20px;\r\n  border: 2px solid #ffffff;\r\n  border-top: 2px solid transparent;\r\n  border-radius: 50%;\r\n  animation: spin 1s linear infinite;\r\n  margin-bottom: 4px;\r\n}\r\n\r\n@keyframes spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n\r\n.avatar-edit-btn {\r\n  display: block;\r\n  margin: 8px auto 0;\r\n  padding: 6px 12px;\r\n  background: #1f2937;\r\n  color: #e2e8f0;\r\n  border: none;\r\n  border-radius: 6px;\r\n  font-size: 12px;\r\n  cursor: pointer;\r\n  transition: background-color 0.3s ease;\r\n}\r\n\r\n.avatar-edit-btn:hover {\r\n  background: #374151;\r\n}\r\n\r\n.info-section {\r\n  margin-bottom: 24px;\r\n}\r\n\r\n.form-field {\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.form-field label {\r\n  display: block;\r\n  font-size: 14px;\r\n  color: #94a3b8;\r\n  margin-bottom: 6px;\r\n}\r\n\r\n.form-field input {\r\n  width: 100%;\r\n  padding: 12px;\r\n  border-radius: 8px;\r\n  background: #0b1220;\r\n  color: #e2e8f0;\r\n  border: 1px solid #1f2937;\r\n  outline: none;\r\n  font-size: 14px;\r\n}\r\n\r\n.form-field input:focus {\r\n  box-shadow: 0 0 0 2px rgba(59,130,246,0.35);\r\n  border-color: #3b82f6;\r\n}\r\n\r\n.form-field input.disabled-input {\r\n  background: #1f2937;\r\n  color: #94a3b8;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.actions {\r\n  display: flex;\r\n  gap: 12px;\r\n  margin-bottom: 24px;\r\n}\r\n\r\n.btn {\r\n  padding: 12px 20px;\r\n  border-radius: 8px;\r\n  background: #1f2937;\r\n  color: #e2e8f0;\r\n  border: none;\r\n  cursor: pointer;\r\n  font-size: 14px;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.btn:hover {\r\n  background: #374151;\r\n  transform: translateY(-1px);\r\n}\r\n\r\n.btn.primary {\r\n  background: #3b82f6;\r\n  color: #fff;\r\n}\r\n\r\n.btn.primary:hover {\r\n  background: #2563eb;\r\n}\r\n\r\n.btn.danger {\r\n  background: #ef4444;\r\n  color: #fff;\r\n}\r\n\r\n.btn.danger:hover {\r\n  background: #dc2626;\r\n}\r\n\r\n.divider {\r\n  height: 1px;\r\n  background: #1f2937;\r\n  margin: 24px 0;\r\n}\r\n\r\n.stats-section h3 {\r\n  margin: 0 0 16px;\r\n  font-size: 18px;\r\n  font-weight: 600;\r\n}\r\n\r\n.stats-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(4, 1fr);\r\n  gap: 16px;\r\n}\r\n\r\n.stat-item {\r\n  text-align: center;\r\n  padding: 16px;\r\n  background: #0b1220;\r\n  border: 1px solid #1f2937;\r\n  border-radius: 8px;\r\n}\r\n\r\n.stat-value {\r\n  font-size: 24px;\r\n  font-weight: 600;\r\n  color: #3b82f6;\r\n  margin-bottom: 4px;\r\n}\r\n\r\n.stat-label {\r\n  font-size: 12px;\r\n  color: #94a3b8;\r\n}\r\n\r\n.profile-actions {\r\n  display: flex;\r\n  gap: 12px;\r\n  justify-content: center;\r\n}\r\n\r\n.error {\r\n  color: #ef4444;\r\n  margin-top: 12px;\r\n  text-align: center;\r\n}\r\n\r\n.success {\r\n  color: #10b981;\r\n  margin-top: 12px;\r\n  text-align: center;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .profile-card {\r\n    width: 100%;\r\n    margin: 0 16px;\r\n  }\r\n  \r\n  .stats-grid {\r\n    grid-template-columns: repeat(2, 1fr);\r\n  }\r\n}\r\n</style>\r\n"]}]}