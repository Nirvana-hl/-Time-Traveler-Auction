{"remainingRequest":"D:\\大学生活\\大三\\全栈ai\\项目\\node_modules\\babel-loader\\lib\\index.js!D:\\大学生活\\大三\\全栈ai\\项目\\-Time-Traveler-Auction\\src\\features\\game\\countdown.js","dependencies":[{"path":"D:\\大学生活\\大三\\全栈ai\\项目\\-Time-Traveler-Auction\\src\\features\\game\\countdown.js","mtime":1762158784240},{"path":"D:\\大学生活\\大三\\全栈ai\\项目\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1762215254891},{"path":"D:\\大学生活\\大三\\全栈ai\\项目\\node_modules\\babel-loader\\lib\\index.js","mtime":1762215256120}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8g57uf5LiA5YCS6K6h5pe25bel5YW377ya6LSf6LSj5ZCv5YqoL+a4heeQhuS4gOS4quWPr+mHjeWkjeS9v+eUqOeahCBpbnRlcnZhbCDorqHml7blmagKCi8qKg0KICog5ZCv5Yqo5YCS6K6h5pe2DQogKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucw0KICogQHBhcmFtIHtudW1iZXJ9IG9wdGlvbnMuc2Vjb25kcyAtIOWIneWni+enkuaVsA0KICogQHBhcmFtIHsocmVtYWluaW5nOm51bWJlcik9PnZvaWR9IG9wdGlvbnMub25UaWNrIC0g5q+P56eS5Zue6LCD77yI5Lyg5YWl5Ymp5L2Z56eS5pWw77yJDQogKiBAcGFyYW0geygpPT52b2lkfSBvcHRpb25zLm9uRG9uZSAtIOe7k+adn+Wbnuiwgw0KICogQHBhcmFtIHsoKT0+bnVtYmVyfG51bGx9IG9wdGlvbnMuZ2V0UmVmIC0g6I635Y+W5b2T5YmNIGludGVydmFsIOW8leeUqO+8iOWklumDqOaMgeacie+8iQ0KICogQHBhcmFtIHsoaWQ6bnVtYmVyfG51bGwpPT52b2lkfSBvcHRpb25zLnNldFJlZiAtIOWGmeWFpSBpbnRlcnZhbCDlvJXnlKgNCiAqLwpleHBvcnQgZnVuY3Rpb24gc3RhcnRDb3VudGRvd24oewogIHNlY29uZHMsCiAgb25UaWNrLAogIG9uRG9uZSwKICBnZXRSZWYsCiAgc2V0UmVmCn0pIHsKICAvLyDmuIXnkIblt7LmnInorqHml7blmagKICBjb25zdCBleGlzdGluZyA9IGdldFJlZiAmJiBnZXRSZWYoKTsKICBpZiAoZXhpc3RpbmcpIHsKICAgIGNsZWFySW50ZXJ2YWwoZXhpc3RpbmcpOwogICAgc2V0UmVmICYmIHNldFJlZihudWxsKTsKICB9CiAgbGV0IHJlbWFpbmluZyA9IE51bWJlcihzZWNvbmRzKSB8fCAwOwogIG9uVGljayAmJiBvblRpY2socmVtYWluaW5nKTsKICBjb25zdCBpZCA9IHNldEludGVydmFsKGFzeW5jICgpID0+IHsKICAgIHJlbWFpbmluZyA9IHJlbWFpbmluZyAtIDE7CiAgICBvblRpY2sgJiYgb25UaWNrKHJlbWFpbmluZyk7CiAgICBpZiAocmVtYWluaW5nIDw9IDApIHsKICAgICAgY2xlYXJJbnRlcnZhbChpZCk7CiAgICAgIHNldFJlZiAmJiBzZXRSZWYobnVsbCk7CiAgICAgIGlmIChvbkRvbmUpIGF3YWl0IG9uRG9uZSgpOwogICAgfQogIH0sIDEwMDApOwogIHNldFJlZiAmJiBzZXRSZWYoaWQpOwp9CgovKioNCiAqIOa4heeQhuWAkuiuoeaXtg0KICogQHBhcmFtIHsoKT0+bnVtYmVyfG51bGx9IGdldFJlZg0KICogQHBhcmFtIHsoaWQ6bnVtYmVyfG51bGwpPT52b2lkfSBzZXRSZWYNCiAqLwpleHBvcnQgZnVuY3Rpb24gY2xlYXJDb3VudGRvd24oZ2V0UmVmLCBzZXRSZWYpIHsKICBjb25zdCBleGlzdGluZyA9IGdldFJlZiAmJiBnZXRSZWYoKTsKICBpZiAoZXhpc3RpbmcpIHsKICAgIGNsZWFySW50ZXJ2YWwoZXhpc3RpbmcpOwogICAgc2V0UmVmICYmIHNldFJlZihudWxsKTsKICB9Cn0="},{"version":3,"names":["startCountdown","seconds","onTick","onDone","getRef","setRef","existing","clearInterval","remaining","Number","id","setInterval","clearCountdown"],"sources":["D:/大学生活/大三/全栈ai/项目/-Time-Traveler-Auction/src/features/game/countdown.js"],"sourcesContent":["// 统一倒计时工具：负责启动/清理一个可重复使用的 interval 计时器\r\n\r\n/**\r\n * 启动倒计时\r\n * @param {Object} options\r\n * @param {number} options.seconds - 初始秒数\r\n * @param {(remaining:number)=>void} options.onTick - 每秒回调（传入剩余秒数）\r\n * @param {()=>void} options.onDone - 结束回调\r\n * @param {()=>number|null} options.getRef - 获取当前 interval 引用（外部持有）\r\n * @param {(id:number|null)=>void} options.setRef - 写入 interval 引用\r\n */\r\nexport function startCountdown({ seconds, onTick, onDone, getRef, setRef }) {\r\n  // 清理已有计时器\r\n  const existing = getRef && getRef()\r\n  if (existing) {\r\n    clearInterval(existing)\r\n    setRef && setRef(null)\r\n  }\r\n\r\n  let remaining = Number(seconds) || 0\r\n  onTick && onTick(remaining)\r\n\r\n  const id = setInterval(async () => {\r\n    remaining = remaining - 1\r\n    onTick && onTick(remaining)\r\n    if (remaining <= 0) {\r\n      clearInterval(id)\r\n      setRef && setRef(null)\r\n      if (onDone) await onDone()\r\n    }\r\n  }, 1000)\r\n\r\n  setRef && setRef(id)\r\n}\r\n\r\n/**\r\n * 清理倒计时\r\n * @param {()=>number|null} getRef\r\n * @param {(id:number|null)=>void} setRef\r\n */\r\nexport function clearCountdown(getRef, setRef) {\r\n  const existing = getRef && getRef()\r\n  if (existing) {\r\n    clearInterval(existing)\r\n    setRef && setRef(null)\r\n  }\r\n}\r\n\r\n\r\n"],"mappings":"AAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASA,cAAcA,CAAC;EAAEC,OAAO;EAAEC,MAAM;EAAEC,MAAM;EAAEC,MAAM;EAAEC;AAAO,CAAC,EAAE;EAC1E;EACA,MAAMC,QAAQ,GAAGF,MAAM,IAAIA,MAAM,CAAC,CAAC;EACnC,IAAIE,QAAQ,EAAE;IACZC,aAAa,CAACD,QAAQ,CAAC;IACvBD,MAAM,IAAIA,MAAM,CAAC,IAAI,CAAC;EACxB;EAEA,IAAIG,SAAS,GAAGC,MAAM,CAACR,OAAO,CAAC,IAAI,CAAC;EACpCC,MAAM,IAAIA,MAAM,CAACM,SAAS,CAAC;EAE3B,MAAME,EAAE,GAAGC,WAAW,CAAC,YAAY;IACjCH,SAAS,GAAGA,SAAS,GAAG,CAAC;IACzBN,MAAM,IAAIA,MAAM,CAACM,SAAS,CAAC;IAC3B,IAAIA,SAAS,IAAI,CAAC,EAAE;MAClBD,aAAa,CAACG,EAAE,CAAC;MACjBL,MAAM,IAAIA,MAAM,CAAC,IAAI,CAAC;MACtB,IAAIF,MAAM,EAAE,MAAMA,MAAM,CAAC,CAAC;IAC5B;EACF,CAAC,EAAE,IAAI,CAAC;EAERE,MAAM,IAAIA,MAAM,CAACK,EAAE,CAAC;AACtB;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASE,cAAcA,CAACR,MAAM,EAAEC,MAAM,EAAE;EAC7C,MAAMC,QAAQ,GAAGF,MAAM,IAAIA,MAAM,CAAC,CAAC;EACnC,IAAIE,QAAQ,EAAE;IACZC,aAAa,CAACD,QAAQ,CAAC;IACvBD,MAAM,IAAIA,MAAM,CAAC,IAAI,CAAC;EACxB;AACF","ignoreList":[]}]}