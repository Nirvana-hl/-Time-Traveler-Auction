{"remainingRequest":"D:\\大学生活\\大三\\全栈ai\\项目\\node_modules\\babel-loader\\lib\\index.js!D:\\大学生活\\大三\\全栈ai\\项目\\-Time-Traveler-Auction\\src\\features\\game\\collections.utils.js","dependencies":[{"path":"D:\\大学生活\\大三\\全栈ai\\项目\\-Time-Traveler-Auction\\src\\features\\game\\collections.utils.js","mtime":1762241351018},{"path":"D:\\大学生活\\大三\\全栈ai\\项目\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1762215254891},{"path":"D:\\大学生活\\大三\\全栈ai\\项目\\node_modules\\babel-loader\\lib\\index.js","mtime":1762215256120}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8g5pS26JeP6ZuG6K6h566X5bel5YW3CgpleHBvcnQgZnVuY3Rpb24gbG9hZENvbGxlY3Rpb25zRnJvbUFydGlmYWN0cyhhcnRpZmFjdE1hcCkgewogIGNvbnN0IHRhZ1RvdGFsID0ge307CiAgY29uc3QgdGFnTWVtYmVycyA9IHt9OwogIGNvbnN0IGFydHMgPSBhcnRpZmFjdE1hcCB8fCB7fTsKICBPYmplY3Qua2V5cyhhcnRzKS5mb3JFYWNoKGlkID0+IHsKICAgIGNvbnN0IGFydCA9IGFydHNbaWRdOwogICAgY29uc3QgdGFncyA9IEFycmF5LmlzQXJyYXkoYXJ0LmNvbGxlY3Rpb25UYWdzKSA/IGFydC5jb2xsZWN0aW9uVGFncyA6IFtdOwogICAgdGFncy5mb3JFYWNoKHRhZyA9PiB7CiAgICAgIHRhZ1RvdGFsW3RhZ10gPSAodGFnVG90YWxbdGFnXSB8fCAwKSArIDE7CiAgICAgIGlmICghdGFnTWVtYmVyc1t0YWddKSB0YWdNZW1iZXJzW3RhZ10gPSBbXTsKICAgICAgdGFnTWVtYmVyc1t0YWddLnB1c2goaWQpOwogICAgfSk7CiAgfSk7CiAgcmV0dXJuIE9iamVjdC5rZXlzKHRhZ1RvdGFsKS5tYXAodGFnID0+ICh7CiAgICBpZDogdGFnLAogICAgbmFtZTogdGFnLAogICAgZGVzY3JpcHRpb246ICcnLAogICAgcmVxdWlyZWRDb3VudDogdGFnVG90YWxbdGFnXSwKICAgIHJld2FyZFBvaW50czogTWF0aC5tYXgoMTAsIHRhZ1RvdGFsW3RhZ10gKiA1KSwKICAgIGFydGlmYWN0SWRzOiB0YWdNZW1iZXJzW3RhZ10gfHwgW10KICB9KSk7Cn0KZXhwb3J0IGZ1bmN0aW9uIGdldEN1cnJlbnRDb2xsZWN0aW9uQ291bnQoewogIGFydGlmYWN0TWFwLAogIG93bmVkQXJ0aWZhY3RJZHMsCiAgY29sbGVjdGlvbgp9KSB7CiAgaWYgKCFBcnJheS5pc0FycmF5KG93bmVkQXJ0aWZhY3RJZHMpKSByZXR1cm4gMDsKICBjb25zdCByZXF1aXJlZENhcCA9IE51bWJlcihjb2xsZWN0aW9uLnJlcXVpcmVkQ291bnQpIHx8IEluZmluaXR5OwogIGxldCBjb3VudCA9IDA7CiAgY29uc3QgdW5pcXVlT3duZWQgPSBBcnJheS5mcm9tKG5ldyBTZXQob3duZWRBcnRpZmFjdElkcykpOwogIHVuaXF1ZU93bmVkLmZvckVhY2goYXJ0aWZhY3RJZCA9PiB7CiAgICBjb25zdCBhcnRpZmFjdCA9IGFydGlmYWN0TWFwW2FydGlmYWN0SWRdOwogICAgaWYgKGFydGlmYWN0ICYmIEFycmF5LmlzQXJyYXkoYXJ0aWZhY3QuY29sbGVjdGlvblRhZ3MpICYmIGFydGlmYWN0LmNvbGxlY3Rpb25UYWdzLmluY2x1ZGVzKGNvbGxlY3Rpb24ubmFtZSkpIHsKICAgICAgY291bnQrKzsKICAgIH0KICB9KTsKICByZXR1cm4gTWF0aC5taW4oY291bnQsIHJlcXVpcmVkQ2FwKTsKfQpleHBvcnQgZnVuY3Rpb24gZ2V0Q29sbGVjdGlvblByb2dyZXNzKHsKICBjdXJyZW50LAogIHJlcXVpcmVkCn0pIHsKICBjb25zdCByZXEgPSBOdW1iZXIocmVxdWlyZWQpIHx8IDE7CiAgcmV0dXJuIE1hdGgubWluKGN1cnJlbnQgLyByZXEgKiAxMDAsIDEwMCk7Cn0="},{"version":3,"names":["loadCollectionsFromArtifacts","artifactMap","tagTotal","tagMembers","arts","Object","keys","forEach","id","art","tags","Array","isArray","collectionTags","tag","push","map","name","description","requiredCount","rewardPoints","Math","max","artifactIds","getCurrentCollectionCount","ownedArtifactIds","collection","requiredCap","Number","Infinity","count","uniqueOwned","from","Set","artifactId","artifact","includes","min","getCollectionProgress","current","required","req"],"sources":["D:/大学生活/大三/全栈ai/项目/-Time-Traveler-Auction/src/features/game/collections.utils.js"],"sourcesContent":["// 收藏集计算工具\r\n\r\nexport function loadCollectionsFromArtifacts(artifactMap) {\r\n  const tagTotal = {}\r\n  const tagMembers = {}\r\n  const arts = artifactMap || {}\r\n  Object.keys(arts).forEach(id => {\r\n    const art = arts[id]\r\n    const tags = Array.isArray(art.collectionTags) ? art.collectionTags : []\r\n    tags.forEach(tag => {\r\n      tagTotal[tag] = (tagTotal[tag] || 0) + 1\r\n      if (!tagMembers[tag]) tagMembers[tag] = []\r\n      tagMembers[tag].push(id)\r\n    })\r\n  })\r\n  return Object.keys(tagTotal).map(tag => ({\r\n    id: tag,\r\n    name: tag,\r\n    description: '',\r\n    requiredCount: tagTotal[tag],\r\n    rewardPoints: Math.max(10, tagTotal[tag] * 5),\r\n    artifactIds: tagMembers[tag] || []\r\n  }))\r\n}\r\n\r\nexport function getCurrentCollectionCount({ artifactMap, ownedArtifactIds, collection }) {\r\n  if (!Array.isArray(ownedArtifactIds)) return 0\r\n  const requiredCap = Number(collection.requiredCount) || Infinity\r\n  let count = 0\r\n  const uniqueOwned = Array.from(new Set(ownedArtifactIds))\r\n  uniqueOwned.forEach(artifactId => {\r\n    const artifact = artifactMap[artifactId]\r\n    if (\r\n      artifact &&\r\n      Array.isArray(artifact.collectionTags) &&\r\n      artifact.collectionTags.includes(collection.name)\r\n    ) {\r\n      count++\r\n    }\r\n  })\r\n  return Math.min(count, requiredCap)\r\n}\r\n\r\nexport function getCollectionProgress({ current, required }) {\r\n  const req = Number(required) || 1\r\n  return Math.min((current / req) * 100, 100)\r\n}\r\n\r\n\r\n"],"mappings":"AAAA;;AAEA,OAAO,SAASA,4BAA4BA,CAACC,WAAW,EAAE;EACxD,MAAMC,QAAQ,GAAG,CAAC,CAAC;EACnB,MAAMC,UAAU,GAAG,CAAC,CAAC;EACrB,MAAMC,IAAI,GAAGH,WAAW,IAAI,CAAC,CAAC;EAC9BI,MAAM,CAACC,IAAI,CAACF,IAAI,CAAC,CAACG,OAAO,CAACC,EAAE,IAAI;IAC9B,MAAMC,GAAG,GAAGL,IAAI,CAACI,EAAE,CAAC;IACpB,MAAME,IAAI,GAAGC,KAAK,CAACC,OAAO,CAACH,GAAG,CAACI,cAAc,CAAC,GAAGJ,GAAG,CAACI,cAAc,GAAG,EAAE;IACxEH,IAAI,CAACH,OAAO,CAACO,GAAG,IAAI;MAClBZ,QAAQ,CAACY,GAAG,CAAC,GAAG,CAACZ,QAAQ,CAACY,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC;MACxC,IAAI,CAACX,UAAU,CAACW,GAAG,CAAC,EAAEX,UAAU,CAACW,GAAG,CAAC,GAAG,EAAE;MAC1CX,UAAU,CAACW,GAAG,CAAC,CAACC,IAAI,CAACP,EAAE,CAAC;IAC1B,CAAC,CAAC;EACJ,CAAC,CAAC;EACF,OAAOH,MAAM,CAACC,IAAI,CAACJ,QAAQ,CAAC,CAACc,GAAG,CAACF,GAAG,KAAK;IACvCN,EAAE,EAAEM,GAAG;IACPG,IAAI,EAAEH,GAAG;IACTI,WAAW,EAAE,EAAE;IACfC,aAAa,EAAEjB,QAAQ,CAACY,GAAG,CAAC;IAC5BM,YAAY,EAAEC,IAAI,CAACC,GAAG,CAAC,EAAE,EAAEpB,QAAQ,CAACY,GAAG,CAAC,GAAG,CAAC,CAAC;IAC7CS,WAAW,EAAEpB,UAAU,CAACW,GAAG,CAAC,IAAI;EAClC,CAAC,CAAC,CAAC;AACL;AAEA,OAAO,SAASU,yBAAyBA,CAAC;EAAEvB,WAAW;EAAEwB,gBAAgB;EAAEC;AAAW,CAAC,EAAE;EACvF,IAAI,CAACf,KAAK,CAACC,OAAO,CAACa,gBAAgB,CAAC,EAAE,OAAO,CAAC;EAC9C,MAAME,WAAW,GAAGC,MAAM,CAACF,UAAU,CAACP,aAAa,CAAC,IAAIU,QAAQ;EAChE,IAAIC,KAAK,GAAG,CAAC;EACb,MAAMC,WAAW,GAAGpB,KAAK,CAACqB,IAAI,CAAC,IAAIC,GAAG,CAACR,gBAAgB,CAAC,CAAC;EACzDM,WAAW,CAACxB,OAAO,CAAC2B,UAAU,IAAI;IAChC,MAAMC,QAAQ,GAAGlC,WAAW,CAACiC,UAAU,CAAC;IACxC,IACEC,QAAQ,IACRxB,KAAK,CAACC,OAAO,CAACuB,QAAQ,CAACtB,cAAc,CAAC,IACtCsB,QAAQ,CAACtB,cAAc,CAACuB,QAAQ,CAACV,UAAU,CAACT,IAAI,CAAC,EACjD;MACAa,KAAK,EAAE;IACT;EACF,CAAC,CAAC;EACF,OAAOT,IAAI,CAACgB,GAAG,CAACP,KAAK,EAAEH,WAAW,CAAC;AACrC;AAEA,OAAO,SAASW,qBAAqBA,CAAC;EAAEC,OAAO;EAAEC;AAAS,CAAC,EAAE;EAC3D,MAAMC,GAAG,GAAGb,MAAM,CAACY,QAAQ,CAAC,IAAI,CAAC;EACjC,OAAOnB,IAAI,CAACgB,GAAG,CAAEE,OAAO,GAAGE,GAAG,GAAI,GAAG,EAAE,GAAG,CAAC;AAC7C","ignoreList":[]}]}