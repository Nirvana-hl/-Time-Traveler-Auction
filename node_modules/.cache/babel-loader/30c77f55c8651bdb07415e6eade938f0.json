{"remainingRequest":"D:\\大学生活\\大三\\全栈ai\\项目\\node_modules\\babel-loader\\lib\\index.js!D:\\大学生活\\大三\\全栈ai\\项目\\-Time-Traveler-Auction\\src\\services\\cleanup-service.js","dependencies":[{"path":"D:\\大学生活\\大三\\全栈ai\\项目\\-Time-Traveler-Auction\\src\\services\\cleanup-service.js","mtime":1762087622757},{"path":"D:\\大学生活\\大三\\全栈ai\\项目\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1762215254891},{"path":"D:\\大学生活\\大三\\全栈ai\\项目\\node_modules\\babel-loader\\lib\\index.js","mtime":1762215256120}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHJvb21TZXJ2aWNlIGZyb20gJy4vcm9vbS1zZXJ2aWNlJzsKY2xhc3MgQ2xlYW51cFNlcnZpY2UgewogIGNvbnN0cnVjdG9yKCkgewogICAgdGhpcy5jbGVhbnVwSW50ZXJ2YWwgPSBudWxsOwogICAgdGhpcy5pc1J1bm5pbmcgPSBmYWxzZTsKICB9CgogIC8vIOWQr+WKqOWumuacn+a4heeQhgogIHN0YXJ0Q2xlYW51cChpbnRlcnZhbE1pbnV0ZXMgPSA1KSB7CiAgICBpZiAodGhpcy5pc1J1bm5pbmcpIHsKICAgICAgY29uc29sZS53YXJuKCfmuIXnkIbmnI3liqHlt7LlnKjov5DooYzkuK0nKTsKICAgICAgcmV0dXJuOwogICAgfQogICAgdGhpcy5pc1J1bm5pbmcgPSB0cnVlOwogICAgdGhpcy5jbGVhbnVwSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChhc3luYyAoKSA9PiB7CiAgICAgIHRyeSB7CiAgICAgICAgYXdhaXQgdGhpcy5wZXJmb3JtQ2xlYW51cCgpOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+a4heeQhuepuuaIv+mXtOaXtuWHuumUmTonLCBlcnJvcik7CiAgICAgIH0KICAgIH0sIGludGVydmFsTWludXRlcyAqIDYwICogMTAwMCk7CiAgICBjb25zb2xlLmxvZyhg5oi/6Ze05riF55CG5pyN5Yqh5bey5ZCv5Yqo77yM5q+PJHtpbnRlcnZhbE1pbnV0ZXN95YiG6ZKf5riF55CG5LiA5qyhYCk7CiAgfQoKICAvLyDlgZzmraLlrprmnJ/muIXnkIYKICBzdG9wQ2xlYW51cCgpIHsKICAgIGlmICh0aGlzLmNsZWFudXBJbnRlcnZhbCkgewogICAgICBjbGVhckludGVydmFsKHRoaXMuY2xlYW51cEludGVydmFsKTsKICAgICAgdGhpcy5jbGVhbnVwSW50ZXJ2YWwgPSBudWxsOwogICAgICB0aGlzLmlzUnVubmluZyA9IGZhbHNlOwogICAgICBjb25zb2xlLmxvZygn5oi/6Ze05riF55CG5pyN5Yqh5bey5YGc5q2iJyk7CiAgICB9CiAgfQoKICAvLyDmiafooYzmuIXnkIYKICBhc3luYyBwZXJmb3JtQ2xlYW51cCgpIHsKICAgIHRyeSB7CiAgICAgIGF3YWl0IHJvb21TZXJ2aWNlLmNsZWFudXBFbXB0eVJvb21zKCk7CiAgICAgIGNvbnNvbGUubG9nKCfnqbrmiL/pl7TmuIXnkIblrozmiJAnKTsKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgIGNvbnNvbGUuZXJyb3IoJ+a4heeQhuepuuaIv+mXtOWksei0pTonLCBlcnJvcik7CiAgICB9CiAgfQoKICAvLyDmiYvliqjmiafooYzkuIDmrKHmuIXnkIYKICBhc3luYyBtYW51YWxDbGVhbnVwKCkgewogICAgYXdhaXQgdGhpcy5wZXJmb3JtQ2xlYW51cCgpOwogIH0KfQpleHBvcnQgZGVmYXVsdCBuZXcgQ2xlYW51cFNlcnZpY2UoKTs="},{"version":3,"names":["roomService","CleanupService","constructor","cleanupInterval","isRunning","startCleanup","intervalMinutes","console","warn","setInterval","performCleanup","error","log","stopCleanup","clearInterval","cleanupEmptyRooms","manualCleanup"],"sources":["D:/大学生活/大三/全栈ai/项目/-Time-Traveler-Auction/src/services/cleanup-service.js"],"sourcesContent":["import roomService from './room-service'\r\n\r\nclass CleanupService {\r\n  constructor() {\r\n    this.cleanupInterval = null\r\n    this.isRunning = false\r\n  }\r\n\r\n  // 启动定期清理\r\n  startCleanup(intervalMinutes = 5) {\r\n    if (this.isRunning) {\r\n      console.warn('清理服务已在运行中')\r\n      return\r\n    }\r\n\r\n    this.isRunning = true\r\n    this.cleanupInterval = setInterval(async () => {\r\n      try {\r\n        await this.performCleanup()\r\n      } catch (error) {\r\n        console.error('清理空房间时出错:', error)\r\n      }\r\n    }, intervalMinutes * 60 * 1000)\r\n\r\n    console.log(`房间清理服务已启动，每${intervalMinutes}分钟清理一次`)\r\n  }\r\n\r\n  // 停止定期清理\r\n  stopCleanup() {\r\n    if (this.cleanupInterval) {\r\n      clearInterval(this.cleanupInterval)\r\n      this.cleanupInterval = null\r\n      this.isRunning = false\r\n      console.log('房间清理服务已停止')\r\n    }\r\n  }\r\n\r\n  // 执行清理\r\n  async performCleanup() {\r\n    try {\r\n      await roomService.cleanupEmptyRooms()\r\n      console.log('空房间清理完成')\r\n    } catch (error) {\r\n      console.error('清理空房间失败:', error)\r\n    }\r\n  }\r\n\r\n  // 手动执行一次清理\r\n  async manualCleanup() {\r\n    await this.performCleanup()\r\n  }\r\n}\r\n\r\nexport default new CleanupService()\r\n"],"mappings":"AAAA,OAAOA,WAAW,MAAM,gBAAgB;AAExC,MAAMC,cAAc,CAAC;EACnBC,WAAWA,CAAA,EAAG;IACZ,IAAI,CAACC,eAAe,GAAG,IAAI;IAC3B,IAAI,CAACC,SAAS,GAAG,KAAK;EACxB;;EAEA;EACAC,YAAYA,CAACC,eAAe,GAAG,CAAC,EAAE;IAChC,IAAI,IAAI,CAACF,SAAS,EAAE;MAClBG,OAAO,CAACC,IAAI,CAAC,WAAW,CAAC;MACzB;IACF;IAEA,IAAI,CAACJ,SAAS,GAAG,IAAI;IACrB,IAAI,CAACD,eAAe,GAAGM,WAAW,CAAC,YAAY;MAC7C,IAAI;QACF,MAAM,IAAI,CAACC,cAAc,CAAC,CAAC;MAC7B,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdJ,OAAO,CAACI,KAAK,CAAC,WAAW,EAAEA,KAAK,CAAC;MACnC;IACF,CAAC,EAAEL,eAAe,GAAG,EAAE,GAAG,IAAI,CAAC;IAE/BC,OAAO,CAACK,GAAG,CAAC,cAAcN,eAAe,QAAQ,CAAC;EACpD;;EAEA;EACAO,WAAWA,CAAA,EAAG;IACZ,IAAI,IAAI,CAACV,eAAe,EAAE;MACxBW,aAAa,CAAC,IAAI,CAACX,eAAe,CAAC;MACnC,IAAI,CAACA,eAAe,GAAG,IAAI;MAC3B,IAAI,CAACC,SAAS,GAAG,KAAK;MACtBG,OAAO,CAACK,GAAG,CAAC,WAAW,CAAC;IAC1B;EACF;;EAEA;EACA,MAAMF,cAAcA,CAAA,EAAG;IACrB,IAAI;MACF,MAAMV,WAAW,CAACe,iBAAiB,CAAC,CAAC;MACrCR,OAAO,CAACK,GAAG,CAAC,SAAS,CAAC;IACxB,CAAC,CAAC,OAAOD,KAAK,EAAE;MACdJ,OAAO,CAACI,KAAK,CAAC,UAAU,EAAEA,KAAK,CAAC;IAClC;EACF;;EAEA;EACA,MAAMK,aAAaA,CAAA,EAAG;IACpB,MAAM,IAAI,CAACN,cAAc,CAAC,CAAC;EAC7B;AACF;AAEA,eAAe,IAAIT,cAAc,CAAC,CAAC","ignoreList":[]}]}